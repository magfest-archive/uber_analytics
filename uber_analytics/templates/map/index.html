{% extends "base.html" %}
{% block title %}Attendance Map{% endblock %}
{% block content %}

        <div id="map"></div>
    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBc0XLtT-jCG3-v0JFLo9vSr2xYljpRRh4&callback=initMap"
    async defer></script>
    <script>
    var center = {
        "lat": {{ center.Latitude }},
        "lng": {{ center.Longitude }}
    };
    var map;
    function initMap()
    {
        map = new google.maps.Map(document.getElementById('map'), {
            zoom: 4,
            center: center
        });
    }
    var windows = [];
    var markers = [];
    {% for key, value in zips.items %}
        windows[{{ forloop.counter }}] = new google.maps.InfoWindow({
          content: "{{ key }}"
        });
        markers[{{ forloop.counter }}] = new google.maps.Marker({
          position: {
              "lat": {{ value.Latitude }},
              "lng": {{ value.Longitude }}
          },
          map: map,
          title: '{{ z.City }} - {{ z.Zipcode }}'
        });
        markers[{{ forloop.counter }}].addListener('click', function() {
          infowindow.open(map, markers[{{ forloop.counter }}]);
        });
    {% endfor %}
    </script>


{% endblock %}
